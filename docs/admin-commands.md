# ğŸ”§ AgentCore Nexus ç®¡ç†å“¡æŒ‡ä»¤å®Œæ•´æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

AgentCore Nexus ç®¡ç†å“¡ç³»çµ±æä¾›å®Œæ•´çš„ç”¨æˆ¶å’Œç¾¤çµ„ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒé€šé Telegram æŒ‡ä»¤é€²è¡Œæ‰€æœ‰ç®¡ç†æ“ä½œã€‚

**éƒ¨ç½²ç‹€æ…‹ï¼š** âœ… å·²éƒ¨ç½²åˆ° us-west-2  
**æ¬Šé™ç³»çµ±ï¼š** åŸºæ–¼ DynamoDB role æ¬„ä½  
**æ”¯æŒé¡å‹ï¼š** ğŸ‘¤ ç§èŠç”¨æˆ¶ + ğŸ‘¥ Telegram ç¾¤çµ„

---

## ğŸ”‘ æ¬Šé™ç³»çµ±

### è§’è‰²é¡å‹
- **Admin** (`role: "admin"`) - ğŸ‘‘ å®Œæ•´ç®¡ç†æ¬Šé™
- **User** (`role: "user"`) - ğŸ‘¤ åŸºæœ¬ä½¿ç”¨æ¬Šé™
- **None** - æœªæˆæ¬Šç”¨æˆ¶

### DynamoDB æ•¸æ“šçµæ§‹
```json
{
  "chat_id": 316743844,        // ä¸»éµï¼šæ­£æ•¸=ç§èŠï¼Œè² æ•¸=ç¾¤çµ„
  "username": "qwer2003tw",    // Telegram ç”¨æˆ¶å
  "enabled": true,              // å•Ÿç”¨ç‹€æ…‹ï¼ˆå¸ƒæ—å€¼ï¼‰
  "role": "admin",             // è§’è‰²ï¼šadmin æˆ– user
  "added_by": "system",        // æ·»åŠ è€…ï¼ˆå¯é¸ï¼‰
  "added_at": "2026-01-06T..."  // æ·»åŠ æ™‚é–“ï¼ˆå¯é¸ï¼‰
}
```

---

## ğŸ“– æŒ‡ä»¤åƒè€ƒ

### 1. ç”¨æˆ¶ç®¡ç†æŒ‡ä»¤

#### `/admin add <chat_id> [username]`
æ·»åŠ ç”¨æˆ¶æˆ–ç¾¤çµ„åˆ°å…è¨±åå–®

**ç¤ºä¾‹ï¼š**
```
/admin add 123456789 john_doe        # æ·»åŠ ç§èŠç”¨æˆ¶
/admin add -1001234567890 my_group   # æ·»åŠ ç¾¤çµ„
/admin add 987654321                 # è‡ªå‹•ç”Ÿæˆç”¨æˆ¶å
```

**å›æ‡‰ï¼š**
```
âœ… å·²æ·»åŠ åˆ°å…è¨±åå–®

ğŸ‘¤ ç§èŠ
ID: 123456789
ç”¨æˆ¶å: @john_doe
ç‹€æ…‹: å·²å•Ÿç”¨
è§’è‰²: user
```

---

#### `/admin remove <chat_id>`
å¾å…è¨±åå–®ç§»é™¤ç”¨æˆ¶æˆ–ç¾¤çµ„

**ç¤ºä¾‹ï¼š**
```
/admin remove 123456789              # ç§»é™¤ç”¨æˆ¶
/admin remove -1001234567890         # ç§»é™¤ç¾¤çµ„
```

**ä¿è­·æ©Ÿåˆ¶ï¼š**
- âš ï¸ ç„¡æ³•ç§»é™¤è‡ªå·±

---

#### `/admin list`
åˆ—å‡ºæ‰€æœ‰å…è¨±åå–®ä¸­çš„ç”¨æˆ¶å’Œç¾¤çµ„

**ç¤ºä¾‹ï¼š**
```
/admin list
```

**å›æ‡‰æ ¼å¼ï¼š**
```
ğŸ“‹ å…è¨±åå–®

ğŸ‘¥ âœ… ğŸ‘‘ @my_group
   ID: -1001234567890 | è§’è‰²: admin

ğŸ‘¤ âœ… ğŸ‘‘ @qwer2003tw
   ID: 316743844 | è§’è‰²: admin

ğŸ‘¤ âœ… ğŸ‘¤ @testuser
   ID: 123456789 | è§’è‰²: user

ç¸½è¨ˆ: 3 å€‹ç”¨æˆ¶/ç¾¤çµ„
```

**åœ–æ¨™èªªæ˜ï¼š**
- ğŸ‘¥ = ç¾¤çµ„ï¼ŒğŸ‘¤ = ç§èŠ
- âœ… = å·²å•Ÿç”¨ï¼ŒâŒ = å·²ç¦ç”¨
- ğŸ‘‘ = ç®¡ç†å“¡ï¼ŒğŸ‘¤ = æ™®é€šç”¨æˆ¶

---

#### `/admin info <chat_id>`
æŸ¥çœ‹ç”¨æˆ¶æˆ–ç¾¤çµ„çš„è©³ç´°ä¿¡æ¯

**ç¤ºä¾‹ï¼š**
```
/admin info 316743844
```

**å›æ‡‰ï¼š**
```
â„¹ï¸ ç”¨æˆ¶è©³ç´°ä¿¡æ¯

é¡å‹: ğŸ‘¤ ç§èŠ
ID: 316743844
ç”¨æˆ¶å: @qwer2003tw
ç‹€æ…‹: âœ… å·²å•Ÿç”¨
è§’è‰²: ğŸ‘‘ ç®¡ç†å“¡
åŠ å…¥æ™‚é–“: 2026-01-06T12:00:00Z
æ·»åŠ è€…: system
```

---

### 2. ç‹€æ…‹æ§åˆ¶æŒ‡ä»¤

#### `/admin enable <chat_id>`
å•Ÿç”¨å·²ç¦ç”¨çš„ç”¨æˆ¶ï¼ˆè»Ÿå•Ÿç”¨ï¼‰

**ç¤ºä¾‹ï¼š**
```
/admin enable 123456789
```

---

#### `/admin disable <chat_id>`
ç¦ç”¨ç”¨æˆ¶ä½†ä¸åˆªé™¤è¨˜éŒ„ï¼ˆè»Ÿåˆªé™¤ï¼‰

**ç¤ºä¾‹ï¼š**
```
/admin disable 123456789
```

**ä¿è­·æ©Ÿåˆ¶ï¼š**
- âš ï¸ ç„¡æ³•ç¦ç”¨è‡ªå·±

---

### 3. æ¬Šé™ç®¡ç†æŒ‡ä»¤

#### `/admin promote <chat_id>`
å°‡æ™®é€šç”¨æˆ¶å‡ç´šç‚ºç®¡ç†å“¡

**ç¤ºä¾‹ï¼š**
```
/admin promote 123456789
```

**å›æ‡‰ï¼š**
```
ğŸ‘‘ å·²å‡ç´šç‚ºç®¡ç†å“¡

ID: 123456789
ç”¨æˆ¶å: @john_doe
```

---

#### `/admin demote <chat_id>`
å°‡ç®¡ç†å“¡é™ç´šç‚ºæ™®é€šç”¨æˆ¶

**ç¤ºä¾‹ï¼š**
```
/admin demote 123456789
```

**ä¿è­·æ©Ÿåˆ¶ï¼š**
- âš ï¸ ç„¡æ³•é™ç´šè‡ªå·±
- æª¢æŸ¥æ˜¯å¦å·²æ˜¯æ™®é€šç”¨æˆ¶

---

### 4. ç³»çµ±ç®¡ç†æŒ‡ä»¤

#### `/admin stats`
æŸ¥çœ‹ç³»çµ±çµ±è¨ˆä¿¡æ¯

**ç¤ºä¾‹ï¼š**
```
/admin stats
```

**å›æ‡‰ï¼š**
```
ğŸ“Š ç³»çµ±çµ±è¨ˆä¿¡æ¯

ç¸½ç”¨æˆ¶æ•¸: 5
  â”œâ”€ ğŸ‘¤ ç§èŠ: 3
  â””â”€ ğŸ‘¥ ç¾¤çµ„: 2

å•Ÿç”¨ç‹€æ…‹:
  â”œâ”€ âœ… å·²å•Ÿç”¨: 4
  â””â”€ âŒ å·²ç¦ç”¨: 1

æ¬Šé™åˆ†å¸ƒ:
  â”œâ”€ ğŸ‘‘ ç®¡ç†å“¡: 2
  â””â”€ ğŸ‘¤ æ™®é€šç”¨æˆ¶: 3
```

---

#### `/admin broadcast <message>`
å‘æ‰€æœ‰å•Ÿç”¨çš„ç”¨æˆ¶å’Œç¾¤çµ„å»£æ’­æ¶ˆæ¯

**ç¤ºä¾‹ï¼š**
```
/admin broadcast ç³»çµ±å°‡æ–¼ä»Šæ™š 23:00 é€²è¡Œç¶­è­·ï¼Œé è¨ˆ 30 åˆ†é˜
```

**è¡Œç‚ºï¼š**
1. å…ˆç™¼é€ç¢ºèªæ¶ˆæ¯ï¼ˆåŒ…å«é è¦½ï¼‰
2. å‘æ‰€æœ‰å•Ÿç”¨ç”¨æˆ¶ç™¼é€
3. è·³éç™¼é€è€…è‡ªå·±
4. é¡¯ç¤ºç™¼é€çµæœçµ±è¨ˆ

**å›æ‡‰ï¼š**
```
ğŸ“¢ æº–å‚™å»£æ’­çµ¦ 10 å€‹ç”¨æˆ¶/ç¾¤çµ„

é è¦½ï¼š
ç³»çµ±å°‡æ–¼ä»Šæ™š 23:00 é€²è¡Œç¶­è­·...

ç™¼é€ä¸­...

âœ… å»£æ’­å®Œæˆ

æˆåŠŸ: 9
å¤±æ•—: 0
ç¸½è¨ˆ: 10
```

---

#### `/admin help`
é¡¯ç¤ºæ‰€æœ‰å¯ç”¨çš„ç®¡ç†å“¡æŒ‡ä»¤

---

## ğŸ¯ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šæ·»åŠ æ–°ç”¨æˆ¶
```bash
# ç”¨æˆ¶ç™¼é€æ¶ˆæ¯å¾Œï¼Œç®¡ç†å“¡æ·»åŠ 
/admin add 123456789 new_user
```

### å ´æ™¯ 2ï¼šç®¡ç† Telegram ç¾¤çµ„
```bash
# å°‡ Bot æ·»åŠ åˆ°ç¾¤çµ„å¾Œï¼Œç²å–ç¾¤çµ„ IDï¼ˆå¾æ—¥èªŒï¼‰
# ç„¶å¾Œæ·»åŠ ç¾¤çµ„åˆ°å…è¨±åå–®
/admin add -1001234567890 project_team
```

### å ´æ™¯ 3ï¼šè‡¨æ™‚ç¦ç”¨é¨·æ“¾ç”¨æˆ¶
```bash
# ç¦ç”¨ä½†ä¸åˆªé™¤è¨˜éŒ„
/admin disable 123456789

# ç¨å¾Œå¯ä»¥é‡æ–°å•Ÿç”¨
/admin enable 123456789
```

### å ´æ™¯ 4ï¼šç³»çµ±å…¬å‘Š
```bash
# å‘æ‰€æœ‰ç”¨æˆ¶å»£æ’­é‡è¦æ¶ˆæ¯
/admin broadcast ğŸ‰ æ–°åŠŸèƒ½ä¸Šç·šï¼ç¾åœ¨æ”¯æŒåœ–ç‰‡åˆ†æåŠŸèƒ½
```

### å ´æ™¯ 5ï¼šå‡ç´šä¿¡ä»»ç”¨æˆ¶ç‚ºç®¡ç†å“¡
```bash
# æª¢æŸ¥ç”¨æˆ¶ä¿¡æ¯
/admin info 123456789

# ç¢ºèªå¾Œå‡ç´š
/admin promote 123456789
```

---

## âš ï¸ å®‰å…¨ä¿è­·

ç³»çµ±å…§å»ºå¤šé‡ä¿è­·æ©Ÿåˆ¶ï¼š

1. **æ¬Šé™é©—è­‰**
   - æ‰€æœ‰ /admin æŒ‡ä»¤éƒ½éœ€è¦ç®¡ç†å“¡æ¬Šé™
   - `@require_admin` è£é£¾å™¨è‡ªå‹•é©—è­‰

2. **è‡ªæˆ‘ä¿è­·**
   - ç„¡æ³•ç§»é™¤è‡ªå·±
   - ç„¡æ³•ç¦ç”¨è‡ªå·±
   - ç„¡æ³•é™ç´šè‡ªå·±

3. **å­˜åœ¨æ€§æª¢æŸ¥**
   - æ“ä½œå‰æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å­˜åœ¨
   - é˜²æ­¢é‡è¤‡æ·»åŠ ç›¸åŒç”¨æˆ¶

4. **æ—¥èªŒè¨˜éŒ„**
   - æ‰€æœ‰ç®¡ç†æ“ä½œè¨˜éŒ„åˆ° CloudWatch
   - åŒ…å«æ“ä½œè€…ã€ç›®æ¨™ã€æ™‚é–“æˆ³

---

## ğŸ“Š ç›£æ§èˆ‡æ—¥èªŒ

### CloudWatch Logs
æ‰€æœ‰ç®¡ç†æ“ä½œéƒ½æœƒè¨˜éŒ„ï¼š
```json
{
  "event_type": "admin_command",
  "chat_id": 316743844,
  "username": "qwer2003tw",
  "subcommand": "add",
  "target_chat_id": 123456789
}
```

### æŸ¥çœ‹æ—¥èªŒ
```bash
aws logs tail /aws/lambda/telegram-lambda-receiver \
  --region us-west-2 \
  --filter-pattern "admin_command"
```

---

## ğŸ”„ å¿«é€Ÿæ“ä½œæŒ‡å—

### æŸ¥çœ‹ç•¶å‰æ‰€æœ‰ç”¨æˆ¶
```
/admin list
```

### æ‰¹é‡ç®¡ç†æµç¨‹
1. `/admin stats` - æŸ¥çœ‹æ•´é«”ç‹€æ³
2. `/admin list` - æŸ¥çœ‹è©³ç´°åå–®
3. `/admin info <ID>` - æª¢æŸ¥ç‰¹å®šç”¨æˆ¶
4. æ ¹æ“šéœ€è¦åŸ·è¡Œæ“ä½œ

### ç·Šæ€¥å»£æ’­
```
/admin broadcast âš ï¸ ç·Šæ€¥é€šçŸ¥ï¼šç³»çµ±å°‡åœ¨ 5 åˆ†é˜å¾Œé‡å•Ÿ
```

---

## ğŸ’¡ æœ€ä½³å¯¦è¸

1. **å®šæœŸå¯©æŸ¥**
   - æ¯é€±åŸ·è¡Œ `/admin stats` æª¢æŸ¥ç”¨æˆ¶æ•¸é‡
   - æ¯æœˆåŸ·è¡Œ `/admin list` å¯©æŸ¥ç”¨æˆ¶åˆ—è¡¨

2. **è¬¹æ…æˆæ¬Š**
   - æ–°ç”¨æˆ¶å…ˆæ·»åŠ ç‚ºæ™®é€šç”¨æˆ¶
   - è§€å¯Ÿä¸€æ®µæ™‚é–“å¾Œå†è€ƒæ…®å‡ç´šç®¡ç†å“¡
   - è‡³å°‘ä¿æŒ 2 å€‹ç®¡ç†å“¡ä»¥é˜²è¬ä¸€

3. **å–„ç”¨ç¦ç”¨åŠŸèƒ½**
   - å¯ç–‘ç”¨æˆ¶å…ˆç¦ç”¨è€Œéåˆªé™¤
   - ä¿ç•™è¨˜éŒ„æ–¹ä¾¿è¿½è¹¤
   - ç¢ºèªç„¡èª¤å¾Œå†æ°¸ä¹…åˆªé™¤

4. **å»£æ’­ä½¿ç”¨**
   - é‡è¦å…¬å‘Šå‰å…ˆæ¸¬è©¦
   - é¿å…é »ç¹å»£æ’­ï¼ˆç”¨æˆ¶é«”é©—ï¼‰
   - æ¶ˆæ¯ç°¡æ½”æ˜ç¢º

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“´å±•

å¯ä»¥è€ƒæ…®æ·»åŠ çš„åŠŸèƒ½ï¼š

1. **æ—¥èªŒæŸ¥çœ‹** - `/admin logs` ç›´æ¥åœ¨ Telegram æŸ¥çœ‹æ—¥èªŒ
2. **é…ç½®ç®¡ç†** - `/admin config` å‹•æ…‹ä¿®æ”¹ç³»çµ±é…ç½®
3. **å·¥å…·ç®¡ç†** - `/admin tools` å•Ÿç”¨/ç¦ç”¨ç‰¹å®š AI å·¥å…·
4. **è‡ªå‹•æ‰¹å‡†** - `/admin auto_approve` æ–°ç”¨æˆ¶è‡ªå‹•åŠ å…¥
5. **è‡¨æ™‚è¨ªå•** - `/admin temp_access` çµ¦äºˆæ™‚é™è¨ªå•æ¬Š

---

## ğŸ“ æŠ€è¡“æ”¯æŒ

å¦‚æœ‰å•é¡Œï¼Œè«‹æŸ¥çœ‹ï¼š
- CloudWatch Logs: `/aws/lambda/telegram-lambda-receiver`
- DynamoDB Table: `telegram-allowlist`
- EventBridge Bus: `telegram-lambda-events`

**ç³»çµ±ç‹€æ…‹ï¼š** âœ… å®Œå…¨é‹ä½œ  
**æœ€å¾Œæ›´æ–°ï¼š** 2026-01-06  
**å€åŸŸï¼š** us-west-2
